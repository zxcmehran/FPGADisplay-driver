# FPGA Display (IP Driver)

This is the C Driver library used in pair with [FPGADisplay-ipcore](https://github.com/zxcmehran/FPGADisplay-ipcore) to control VGA Display. Its required to install the driver in order to programmatically control display output.

It lets the designer to control each single pixel on the screen. The designer will be able to plot basic geometric shapes including lines, triangles, rectangles and circles. It won't use any floating point operations and the whole system is implemented using integers. It also lets the designer to print ASCII character strings over the screen using a monospace typeface. In addition, it provides a terminal-like area on the screen which reflows the text and can be useful for debugging and output monitoring.

This is a demo example of output possibilities. Please note that it's actual monitor output extracted by dumping VGA display memory to a image file.

![FPGA Display Handler Output](http://static.ahadi.me/projects/fpga-display/example_preview.png)

## Installing

**Note:** This driver needs the main IP Core to operate. Check [FPGADisplay-ipcore](https://github.com/zxcmehran/FPGADisplay-ipcore) repository for installation details.

This repository contains **IP Driver files**. Clone it in a directory named `display_handler_v1_00_a` under `drivers` directory in your project root or in global user peripheral repository of your EDK installation.

    $ cd [project dir or global repo]
    $ cd drivers
    $ git clone https://github.com/zxcmehran/FPGADisplay-driver.git display_handler_v1_00_a

After cloning, just add `display_handler.h` header file and include it in your application code.

## Usage
First of all, it's needed to initialize some parameters. The library needs memory base address to operate. It's usually stored on a constant named like `XPAR_DISPLAY_HANDLER_0_MEM0_BASEADDR` in `xparameters.h` header file which gets generated by EDK software after LibGen operation. It's needed to call `setBaseAddr()` in the beginning of main function:

    setBaseAddr(XPAR_DISPLAY_HANDLER_0_MEM0_BASEADDR);

If you are not using default `640x480` resolution, then set the actual display mode using `setResolution()`:

    setResolution(1024, 768);

## Terminal-like area
Terminal-like area is placed on the bottom of the screen. It behaves just like a Linux Terminal / Windows Command Prompt output area and scrolls up the placed text upon line overflow or inserting a new line. You can see an example of repetitive insertion of "`This is a test! `" string on the preview image above. It also supports control characters like `\t`, `\r`, and `\n`.

If you are going to use terminal-like area on the screen, then you should set the size of the area by calling `setLineCount()`. By default, 3 lines are used.

    setLineCount(4);

You can insert text on the terminal by simply calling `printString()`:

    printString("Just another string. ");


## License
This is a B.Sc Project of Electrical Engineering by **[Mehran Ahadi](https://mehran.ahadi.me/)**. Its published under
**[MIT](https://tldrlegal.com/license/mit-license) license**. Please include the copyright and the license notice in all copies or substantial uses of the work.
